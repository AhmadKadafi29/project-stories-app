const CACHE_NAME="story-app-v1",ASSETS_TO_CACHE=["/","/index.html","/manifest.json","/images/icons/icon-192x192.png","/images/icons/icon-512x512.png"];self.addEventListener("install",(n=>{n.waitUntil(caches.open(CACHE_NAME).then((n=>n.addAll(ASSETS_TO_CACHE))))})),self.addEventListener("fetch",(n=>{n.respondWith(caches.match(n.request).then((t=>t||fetch(n.request))))})),self.addEventListener("push",(n=>{const t=n.data?n.data.json():{},i=t.title||"Story App Notification",e={body:t.options?.body||"You have a new notification",icon:"/images/icons/icon-192x192.png",badge:"/images/icons/icon-72x72.png"};n.waitUntil(self.registration.showNotification(i,e))})),self.addEventListener("notificationclick",(n=>{n.notification.close(),n.waitUntil(clients.matchAll({type:"window"}).then((n=>n.length>0?n[0].focus():clients.openWindow("/"))))}));